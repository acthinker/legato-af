<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: Semaphore API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Simplifying M2M development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_semaphore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Semaphore API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__semaphore_8h.html">Click here for the API Reference documentation.</a></p>
<hr/>
<p><a class="el" href="c_semaphore.html#create_semaphore">Creating a Semaphore</a> <br/>
 <a class="el" href="c_semaphore.html#use_semaphore">Using a Semaphore</a> <br/>
 <a class="el" href="c_semaphore.html#delete_semaphore">Deleting a Semaphore</a> <br/>
 <a class="el" href="c_semaphore.html#diagnostics_semaphore">Diagnostics</a> <br/>
</p>
<p>This API provides standard semaphore functionality, but with added diagnostic capabilities. These semaphores can only be shared by threads within the same process.</p>
<p>Two kinds of semaphore are supported by Legato:</p>
<ul>
<li><b>Normal</b> </li>
<li><b>Traceable</b> </li>
</ul>
<p>Normal semaphores are faster than traceable semaphores and consume less memory, but still offer some diagnosic capabilities. Traceable semaphores generally behave the same as Normal sempahores, but can also log their activities.</p>
<p>All semaphores can wait (decrease value by one) and post (increase value by one). The same wait, post, and delete functions work for all the semaphores, regardless of what type they are. This means that a semaphore can be changed from Normal to Traceable or vice versa just by changing the function you use to create it. This helps when troubleshooting race conditions or deadlocks because it's easy to switch one semaphore or a select few semaphores to Traceable, without suffering the runtime cost of switching <em>all</em> semaphores to the slower Traceable semaphores.</p>
<h1><a class="anchor" id="create_semaphore"></a>
Creating a Semaphore</h1>
<p>In Legato, semaphores are dynamically allocated objects. Functions that create them return references to them (of type le_sem_Ref_t). The functions for creating semaphores are:</p>
<ul>
<li><a class="el" href="le__semaphore_8h.html#add9fab5440abcff5a8bc3b8bd1126d99">le_sem_Create()</a> - creates a <b>normal</b>, <b>semaphore</b>.</li>
<li><a class="el" href="le__semaphore_8h.html#a27f805b9351bb5bb4a5fd6db6cbff982">le_sem_CreateTraceable()</a> - creates a <b>traceable</b>, <b>semaphore</b>.</li>
</ul>
<p>Note that all semaphores have names. This is required for diagnostic purposes. See <a class="el" href="c_semaphore.html#diagnostics_semaphore">Diagnostics</a> below.</p>
<h1><a class="anchor" id="use_semaphore"></a>
Using a Semaphore</h1>
<p>Functions to increase and decrease semaphores are:</p>
<ul>
<li><code><a class="el" href="le__semaphore_8h.html#abb859411cc58fbcc576c986ef52083b2">le_sem_Post()</a></code> </li>
<li><code><a class="el" href="le__semaphore_8h.html#aecdf87fe330dd008771b7530edbb1f2b">le_sem_Wait()</a></code> </li>
<li><code><a class="el" href="le__semaphore_8h.html#a6a6c435042dd37a3c78ebbab6ec72689">le_sem_TryWait()</a></code> </li>
<li><code><a class="el" href="le__semaphore_8h.html#a14475f0c2f5483427279d39220f55eaa">le_sem_WaitWithTimeOut()</a></code> </li>
</ul>
<p>Function to get semaphores values is:</p>
<ul>
<li><code><a class="el" href="le__semaphore_8h.html#ac4858ccb0ba748ca463bb29807b75c05">le_sem_GetValue()</a></code> </li>
</ul>
<p>It doesn't matter what type of semaphore you are using, you still use the same functions for increasing, decreasing, getting value your semaphore.</p>
<h1><a class="anchor" id="delete_semaphore"></a>
Deleting a Semaphore</h1>
<p>When you are finished with a semaphore, you must delete it by calling <a class="el" href="le__semaphore_8h.html#a96361b126f59934354ca17bf8b74b8f6">le_sem_Delete()</a>.</p>
<p>There must not be anything using the semaphore when it is deleted (i.e., no one can be waiting on it).</p>
<h1><a class="anchor" id="diagnostics_semaphore"></a>
Diagnostics</h1>
<p>Both Normal and Traceable semaphores have some diagnostics capabilities.</p>
<p>The command-line diagnostic tool lssemaphore can be used to list the semaphores that currently exist inside a given process. The state of each semaphore can be seen, including a list of any threads that might be waiting for that semaphore.</p>
<p>The tool threadlook will show if a given thread is currently waiting for a semaphore, and will name that semaphore.</p>
<p>If there are Traceable semaphores in a process, then it will be possible to use the log tool to enable or disable tracing on that semaphore. The trace keyword name is the name of the process, the name of the component, and the name of the semaphore, separated by slashes (e.g., "process/component/semaphore").</p>
<hr/>
<p>Copyright (C) Sierra Wireless, Inc. 2014. All rights reserved. Use of this work is subject to license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="http://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.6
        </div>
    </div>
</body>
</html>
