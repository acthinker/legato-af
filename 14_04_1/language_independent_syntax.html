<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: Interface Syntax</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Simplifying M2M development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('language_independent_syntax.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Interface Syntax </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The interface file currently supports defining two types of interface objects:</p>
<ul>
<li>functions</li>
<li>handlers</li>
</ul>
<p>Functions are similar to C functions. They can take input and output parameters, and can return a result. A handler is a special function type that can be registered for callbacks.</p>
<p>The interface file currently supports a limited number of pre-defined types. For additional types, support to include C types is available.</p>
<p>The interface file supports both C and C++ comment styles. Comments that use the doxygen formats </p>
<pre class="fragment">/** </pre><p> to start a multi-line comment or</p>
<pre class="fragment">///&lt;  </pre><p> to start a one line comment receive special processing. Multi-line comments at the start of the interface file will be copied directly to the appropriate generated files.</p>
<p>See <a class="el" href="language_independent_syntax.html#function">Specifying a Function</a> and <a class="el" href="language_independent_syntax.html#handler">Specifying a Handler</a> for details on how comments are copied.</p>
<h1><a class="anchor" id="types"></a>
Type Support</h1>
<p>The interface file currently supports a limited number of pre-defined types. These are:</p>
<pre class="fragment">uint8
uint16
uint32
uint64

int8
int16
int32
int64

string
</pre><p>The unsigned and signed integer types are self-explanatory. See <a class="el" href="language_independent_syntax.html#function">Specifying a Function</a> for details on the <code>string</code> type.</p>
<p>There is currently no support for defining additional types within the interface file. See <a class="el" href="language_independent_c.html">C Language Support</a> for details on how to include C types, which can be used anywhere that the pre-defined types are used.</p>
<p>Also, all C types defined in the <code><a class="el" href="legato_8h.html">legato.h</a></code> file are available. The most commonly used of these is the <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> type.</p>
<h1><a class="anchor" id="function"></a>
Specifying a Function</h1>
<p>A function is specified as:</p>
<pre class="fragment">FUNCTION [&lt;returnType&gt;] &lt;name&gt;
(
    [&lt;parameterList&gt;]
);
</pre><p>The <code>parameterList</code> can contain one or more parameters separated by commas, or can be empty if there are no parameters. The scalar type refers to anything that's not an array or string (i.e. scalar types do not have a length). These parameters types are supported:</p>
<ul>
<li><code> &lt;type&gt; &lt;name&gt; [ ( "IN" | "OUT" ) ]</code><ul>
<li>scalar type</li>
<li>defaults to IN if a direction is not specified</li>
</ul>
</li>
<li><code> &lt;type&gt; &lt;name&gt; "[" [ &lt;minSize&gt; ".." ] &lt;maxSize&gt; "]" "IN" </code><ul>
<li>an IN array</li>
<li><code>maxSize</code> specifies the maximum number of elements allowed for the array</li>
<li>optional <code>minSize</code> specifies the minimum number of elements required for the array</li>
</ul>
</li>
<li><code> &lt;type&gt; &lt;name&gt; "[" &lt;minSize&gt; "]" "OUT" </code><ul>
<li>an OUT array</li>
<li>array should be large enough to store <code>minSize</code> elements; if supported by the function implemention, a shorter OUT array can be used.</li>
</ul>
</li>
<li><code> "string" &lt;name&gt; "[" [ &lt;minSize&gt; ".." ] &lt;maxSize&gt; "]" "IN" </code><ul>
<li>an IN string</li>
<li><code>maxSize</code> specifies the maximum string length allowed,</li>
<li>optional <code>minSize</code> specifies the minimum string length required</li>
<li>string length is given as number of characters, excluding any terminating characters</li>
</ul>
</li>
<li><code> "string" &lt;name&gt; "[" &lt;minSize&gt; "]" "OUT" </code><ul>
<li>an OUT string</li>
<li>string should be large enough to store <code>minSize</code> characters; if supported by the function implemention, a shorter OUT string can be used.</li>
<li>string length is given as number of characters, excluding any terminating characters</li>
</ul>
</li>
</ul>
<p>The <code>returnType</code> is optional, and if specified, must be a scalar type as described above.</p>
<p>Comments given in the function definition will be copied to the appropriate generated files under the following conditions:</p>
<ul>
<li>multi-line comments must start with<pre class="fragment">"/**"</pre></li>
<li>single-line comments must start with<pre class="fragment">///&lt;"</pre> Unlike typical doxygen usage, each single line must start with "///&lt;", rather than just the first line.</li>
<li>if the function definition is preceded by a multi-line comment then this comment will be copied to the appropriate generated files.</li>
<li>if any parameter is followed by a multi-line comment or one or more single line comments, then all these comments will be copied to the appropriate generated files.</li>
</ul>
<h1><a class="anchor" id="handler"></a>
Specifying a Handler</h1>
<p>Do this to specify a handler:</p>
<pre class="fragment">HANDLER &lt;handlerType&gt;
{
    HANDLER_PARAMS
    (
        [&lt;parameterList&gt;]
    );
        
    ADD_HANDLER_PARAMS
    (
        [&lt;parameterList&gt;]
    );
}
</pre><p>The <code>parameterList</code> can contain one or more parameters separated by commas, or can be empty if there are no parameters. Currently, the <code>HANDLER_PARAMS</code> <code>parameterList</code> can only be scalar types, as described above for <a class="el" href="language_independent_syntax.html#function">Specifying a Function</a>. All the parameters should be IN parameters. The <code>ADD_HANDLER_PARAMS</code> <code>parameterList</code> can be anything that's valid for a function. <code>ADD_HANDLER_PARAMS</code> does not need to be specified if the <code>parameterList</code> is empty.</p>
<p>Comments given for a handler definition are not currently copied to the appropriate generated files.</p>
<p>See <a class="el" href="language_independent_c.html#c_handler">Handlers in C</a> for details on the C code generated from the above handler definition.</p>
<h1><a class="anchor" id="example"></a>
Interface File Sample</h1>
<p>Here's a sample file:</p>
<pre class="fragment">/**
 * Example interface file
 */

/**
 * Handler definition
 */
HANDLER TestA
{
    HANDLER_PARAMS
    (
        int32 x
    );
        
    ADD_HANDLER_PARAMS ();
};

/**
 * Function takes all the possible kinds of parameters, but returns nothing
 */
FUNCTION allParameters
(
    int32 a,  ///&lt; first one-line comment
              ///&lt; second one-line comment
    uint32 b OUT,
    uint32 data[10] IN,
    uint32 output[10] OUT,
    string label [10..20] IN,
    string response [20] OUT
);

/**
 * This function fakes an event so the handler will be callled.  
 * Only needed for testing.  Would never exist on a real system.
 */
FUNCTION TriggerTestA
(
);
</pre><hr/>
<p>Copyright (C) Sierra Wireless, Inc. 2014. All rights reserved. Use of this work is subject to license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="http://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.6
        </div>
    </div>
</body>
</html>
